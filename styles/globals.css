/* =========================
   FUNTIME BASE
   ========================= */
:root{
  --ft-bg:#070607;
  --ft-text:#eaeaea;
  --ft-muted:#9a9a9a;

  --ft-red:#e53935;
  --ft-red-solid: rgba(229,57,53,.92);
  --ft-red-soft:  rgba(229,57,53,.28);
  --ft-red-border:rgba(229,57,53,.40);
}

html,body{
  background:var(--ft-bg) !important;
  color:var(--ft-text) !important;
  font-family:Inter,system-ui,sans-serif;
}

body{ position:relative; }
body::before{
  content:"";
  position:fixed;
  top:-12%;
  right:-12%;
  width:1400px;
  height:1400px;
  background:radial-gradient(circle at top right, rgba(100,4,4,1), transparent 70%);
  z-index:0;
  pointer-events:none;
}
#__next{ position:relative; z-index:1; }

h1,h2,h3,h4{
  font-family:Montserrat,Inter,system-ui,sans-serif;
  letter-spacing:.04em;
}

html{ color-scheme:dark !important; }

/* =========================
   HEADER (Nextra)
   ========================= */

/* убираем “полосу”/подложку за шапкой */
.nextra-nav-container,
.nextra-nav-container > div{
  background:transparent !important;
  border:0 !important;
  box-shadow:none !important;
}

/* blur-слой (фон за капсулой) */
.nextra-nav-container .nextra-nav-container-blur{
  opacity:0 !important;
  background:transparent !important;
  box-shadow:none !important;
  pointer-events:none !important;
}

/* капсула */
.nextra-nav-container nav{
  width: min(1400px, calc(100vw - 80px)) !important;
  margin: 14px auto 0 auto !important;

  display:flex !important;
  align-items:center !important;
  justify-content:space-between !important;
  gap:14px !important;

  padding: 10px 16px !important;
  border-radius: 14px !important;

  background: rgba(26,26,30,.78) !important;
  border: 1px solid rgba(255,255,255,.07) !important;
  backdrop-filter: blur(12px) saturate(115%) !important;

  box-shadow:
    0 20px 70px rgba(0,0,0,.65),
    inset 0 1px 0 rgba(255,255,255,.035) !important;
}

/* фикс высоты: лого и поиск одинаковые */
.nextra-nav-container nav > a,
.nextra-nav-container nav input[type="search"],
.nextra-nav-container nav input{
  height: 44px !important;
  line-height: 44px !important;
  box-sizing: border-box !important;
}

/* логотип “бабл в бабле” */
.nextra-nav-container nav > a{
  display:inline-flex !important;
  align-items:center !important;
  gap:10px !important;

  padding: 0 16px !important;
  border-radius: 12px !important;

  background: rgba(255,255,255,.05) !important;
  border: 1px solid rgba(255,255,255,.06) !important;

  text-transform:uppercase !important;
  letter-spacing:.06em !important;
  font-weight:800 !important;
  color:rgba(255,255,255,.92) !important;
  text-decoration:none !important;
}

/* “WIKI” внутри лого тише */
.nextra-nav-container nav > a span:last-child{
  opacity:.55 !important;
  font-weight:700 !important;
}

/* вкладки (Главная / Основной сайт) */
.nextra-nav-container nav a{
  color: rgba(255,255,255,.86) !important;
  text-decoration:none !important;
}

.nextra-nav-container nav a:not(:first-child){
  font-weight: 400 !important;
  opacity: .82 !important;
  padding: 8px 10px !important;
  border-radius: 10px !important;
  position: relative !important;
}
.nextra-nav-container nav a:not(:first-child):hover{ opacity: 1 !important; }

.nextra-nav-container nav a:not(:first-child)::after{
  content:"";
  position:absolute;
  left:10px; right:10px; bottom:2px;
  height:2px;
  border-radius:2px;
  background:transparent;
  opacity:.9;
}
.nextra-nav-container nav a[aria-current="page"]::after{
  background: rgba(255,255,255,.9) !important;
}

/* раскладка: лого -> вкладки -> поиск (через :has) */
.nextra-nav-container nav > a{ order: 1 !important; }

.nextra-nav-container nav > *:has(a[href*="funtime.su"]){
  order: 2 !important;
  margin-left: 10px !important;
}

.nextra-nav-container nav > *:has(input[type="search"]){
  order: 3 !important;
  margin-left: auto !important;
}

/* поиск в хедере */
.nextra-nav-container nav input[type="search"],
.nextra-nav-container nav input{
  width: 300px !important;
  max-width: 34vw !important;

  padding: 0 14px !important;
  border-radius: 12px !important;

  background: rgba(18,18,22,.85) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  color: rgba(255,255,255,.92) !important;
}
.nextra-nav-container nav input::placeholder{
  color: rgba(255,255,255,.55) !important;
}

/* если вдруг появляется кнопка меню */
.nextra-nav-container nav button[aria-label*="Menu" i],
.nextra-nav-container nav button[title*="Menu" i]{
  display:none !important;
}

/* =========================
   SEARCH (Nextra) — непрозрачная модалка + результаты
   ========================= */

/* хеддер всегда сверху */
.nextra-nav-container{
  position: sticky !important;
  top: 0 !important;
  z-index: 9999 !important;
}

/* оверлей держим ниже хедера */
.nextra-search .nx-fixed.nx-inset-0{
  top: var(--nextra-navbar-height) !important;
  z-index: 9000 !important;
  background: rgba(0,0,0,.78) !important;
  backdrop-filter: none !important;
}

/* панель поиска */
.nextra-search [role="dialog"],
.nextra-search [role="dialog"] > div,
.nextra-search [role="dialog"] .nx-rounded-2xl{
  z-index: 9001 !important;
  background: rgba(14,14,18,.98) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  box-shadow: 0 30px 120px rgba(0,0,0,.85) !important;
  backdrop-filter: none !important;
  opacity: 1 !important;
}

/* инпут внутри модалки */
.nextra-search [role="dialog"] input,
.nextra-search [role="dialog"] input[type="search"]{
  background: rgba(20,20,26,1) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
}

/* список результатов */
.nextra-search ul.nextra-scrollbar{
  background: rgba(14,14,18,.98) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  backdrop-filter: none !important;
  opacity: 1 !important;
}
.nextra-search ul.nextra-scrollbar li,
.nextra-search ul.nextra-scrollbar a{
  background: transparent !important;
}
.nextra-search ul.nextra-scrollbar a:hover,
.nextra-search ul.nextra-scrollbar a[aria-selected="true"],
.nextra-search ul.nextra-scrollbar [aria-selected="true"]{
  background: rgba(255,255,255,.08) !important;
}

/* =========================
   TOC (справа)
   ========================= */

/* скрыть “On This Page” */
nav.nextra-toc p{ display:none !important; }

/* Скрыть именно блок "Edit this page" в TOC (если он там) — не по домену */
nav[aria-label="table of contents"] a[aria-label*="Edit" i],
nav[aria-label="table of contents"] a:has(svg) {
  /* при необходимости подберём точнее по твоему DOM */
}

/* активный пункт TOC красным + красный бордер слева */
nav[aria-label="table of contents"] a[aria-current="true"]{
  color: var(--ft-red-solid) !important;
}
nav[aria-label="table of contents"] a:hover{
  color: #ff5a55 !important;
}
nav[aria-label="table of contents"] li{
  border-left-color: rgba(255,255,255,.08) !important;
}
nav[aria-label="table of contents"] li:has(a[aria-current="true"]){
  border-left: 2px solid var(--ft-red-solid) !important;
}

/* =========================
   DISABLE: theme switcher + devtools badge
   ========================= */
button[title="Change theme"],
button[aria-label*="theme" i],
button[title*="theme" i],
button[aria-label*="dark" i],
button[title*="dark" i],
button[aria-label*="light" i],
button[title*="light" i],
.nextra-theme-switch,
.nextra-theme-toggle{
  display:none !important;
}
div.nx-sticky.nx-bottom-0{ display:none !important; }

nextjs-portal,
#nextjs-portal,
button#nextjs-logo,
[data-nextjs-dev-tools-button="true"]{
  display:none !important;
}

/* =========================
   FOOTER
   ========================= */
footer{
  background:transparent !important;
  border-top:0 !important;
  box-shadow:none !important;
  backdrop-filter:none !important;
}

/* =========================
   SIDEBAR (левый) — карточка + корректная active-логика
   ========================= */

@media (min-width: 768px) {
  .nextra-sidebar-container{ width:300px !important; }

  .nextra-sidebar-container > div{
    margin-top:14px !important;
    margin-left:14px !important;
    margin-right:10px !important;

    padding:14px !important;
    border-radius:14px !important;

    background: rgba(26,26,30,.68) !important;
    border: 1px solid rgba(255,255,255,.06) !important;

    backdrop-filter: blur(12px) saturate(115%) !important;
    box-shadow:
      0 18px 70px rgba(0,0,0,.65),
      inset 0 1px 0 rgba(255,255,255,.035) !important;
  }
}

.nextra-sidebar-container .nextra-scrollbar{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* никогда не красим LI (иначе квадраты) */
.nextra-sidebar-container .nextra-menu-desktop li,
.nextra-sidebar-container .nextra-menu-desktop li.active{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* базовые ссылки */
.nextra-sidebar-container .nextra-menu-desktop a{
  display:block !important;
  padding:10px 12px !important;
  border-radius:14px !important;

  background: transparent !important;
  border: 1px solid transparent !important;

  color: rgba(255,255,255,.84) !important;
  text-decoration:none !important;

  transition: background-color .15s ease, color .15s ease, opacity .15s ease;
}

.nextra-sidebar-container .nextra-menu-desktop a:hover{
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.92) !important;
}

/* вложенность */
.nextra-sidebar-container .nextra-menu-desktop ul ul{
  margin-left:10px !important;
  padding-left:10px !important;
  border-left: 1px solid rgba(255,255,255,.06) !important;
}
.nextra-sidebar-container .nextra-menu-desktop ul ul a{
  padding:8px 10px !important;
  border-radius:12px !important;
  color: rgba(255,255,255,.78) !important;
  font-weight: 500 !important;
}

/* родитель-группа (has ul): по умолчанию не красим */
.nextra-sidebar-container .nextra-menu-desktop li.active:has(ul) > a{
  background: transparent !important;
  border-color: transparent !important;
  color: rgba(255,255,255,.88) !important;
  font-weight: 600 !important;
}

/* если активен подпункт — родитель точно не красим */
.nextra-sidebar-container .nextra-menu-desktop li.active:has(ul):has(ul li.active) > a{
  background: transparent !important;
  border-color: transparent !important;
}

/* если активен сам /start (нет active внутри ul) — красим родителя */
.nextra-sidebar-container .nextra-menu-desktop li.active:has(ul):not(:has(ul li.active)) > a{
  background: var(--ft-red-solid) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  color: rgba(255,255,255,.96) !important;
  font-weight: 700 !important;
}

/* лист (активная страница без ul) — красная кнопка */
.nextra-sidebar-container .nextra-menu-desktop li.active:not(:has(ul)) > a{
  background: var(--ft-red-solid) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  color: rgba(255,255,255,.96) !important;
  font-weight: 700 !important;
}

/* активный подпункт — мягче */
.nextra-sidebar-container .nextra-menu-desktop ul ul li.active:not(:has(ul)) > a{
  background: var(--ft-red-soft) !important;
  border: 1px solid var(--ft-red-border) !important;
  color: rgba(255,255,255,.95) !important;
  font-weight: 650 !important;
}

/* стрелка раскрытия */
.nextra-sidebar-container .nextra-menu-desktop li > a svg{
  opacity:.75 !important;
}

/* =========================
   LINKS: синий -> красный (в контенте)
   ========================= */
.prose a,
.nextra-content a,
main a[href]{
  color: var(--ft-red-solid) !important;
}
.prose a:hover,
.nextra-content a:hover,
main a[href]:hover{
  color: #ff5a55 !important;
}
a.nx-underline,
a[class*="underline"]{
  text-decoration-color: var(--ft-red-solid) !important;
}

/* остатки nx-primary */
.nx-text-primary-600,
.nx-text-primary-500{
  color: var(--ft-red-solid) !important;
}
.nx-border-primary-500,
.nx-border-primary-600{
  border-color: var(--ft-red-solid) !important;
}
.nx-decoration-primary-500,
.nx-decoration-primary-600{
  text-decoration-color: var(--ft-red-solid) !important;
}

/* FIX: стрелка (v / >) у родителя-группы должна быть справа, а не снизу */
.nextra-sidebar-container .nextra-menu-desktop li > a{
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 10px !important;
}

/* чтобы иконка не сжималась и не переносилась */
.nextra-sidebar-container .nextra-menu-desktop li > a svg{
  flex: 0 0 auto !important;
}

/* =========================
   CONTENT POLISH (Prose)
   ========================= */
:root{
  --ft-card: rgba(26,26,30,.62);
  --ft-card-border: rgba(255,255,255,.08);
  --ft-card-shadow: 0 18px 70px rgba(0,0,0,.55);
  --ft-code-bg: rgba(14,14,18,.92);
  --ft-code-border: rgba(255,255,255,.08);
}

/* ширина контента чуть “дороже” на больших */
.nextra-content{
  max-width: 980px !important;
}

/* заголовки + разделители */
.prose h1, .prose h2, .prose h3{
  scroll-margin-top: 90px;
}
.prose hr{
  border-color: rgba(255,255,255,.10) !important;
  opacity: 1 !important;
}

/* inline code */
.prose :not(pre) > code{
  background: rgba(255,255,255,.06) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  border-radius: 10px !important;
  padding: .18em .45em !important;
  color: rgba(255,255,255,.92) !important;
}

/* code blocks */
.prose pre{
  background: var(--ft-code-bg) !important;
  border: 1px solid var(--ft-code-border) !important;
  border-radius: 16px !important;
  box-shadow: 0 22px 90px rgba(0,0,0,.65) !important;
}
.prose pre code{
  color: rgba(255,255,255,.92) !important;
}

/* blockquote (цитаты/примечания) */
.prose blockquote{
  border-left: 3px solid var(--ft-red-solid) !important;
  background: rgba(255,255,255,.04) !important;
  border-radius: 14px !important;
  padding: 14px 16px !important;
  color: rgba(255,255,255,.84) !important;
}

/* tables */
.prose table{
  width: 100% !important;
  border-collapse: separate !important;
  border-spacing: 0 !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  border-radius: 16px !important;
  overflow: hidden !important;
  background: rgba(14,14,18,.55) !important;
}
.prose th{
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.92) !important;
  border-bottom: 1px solid rgba(255,255,255,.10) !important;
}
.prose td{
  border-bottom: 1px solid rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.84) !important;
}
.prose tr:last-child td{
  border-bottom: 0 !important;
}

/* kbd */
.prose kbd{
  background: rgba(255,255,255,.06) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  border-bottom-color: rgba(255,255,255,.18) !important;
  border-radius: 10px !important;
  padding: .18em .5em !important;
  color: rgba(255,255,255,.90) !important;
}

/* “карточки” для любых div с обводкой (часто в MDX) */
.prose .ft-card,
.prose .nx-rounded-xl,
.prose .nx-rounded-2xl{
  border: 1px solid var(--ft-card-border) !important;
  background: var(--ft-card) !important;
  box-shadow: var(--ft-card-shadow) !important;
}

/* scrollbar (мягкий) */
*{
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,.18) rgba(255,255,255,.04);
}
*::-webkit-scrollbar{ width: 10px; height: 10px; }
*::-webkit-scrollbar-track{ background: rgba(255,255,255,.04); }
*::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.16);
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,.04);
}
*::-webkit-scrollbar-thumb:hover{ background: rgba(255,255,255,.22); }

@media (min-width: 768px){
  .nextra-nav-container nav button[aria-label*="Menu" i],
  .nextra-nav-container nav button[title*="Menu" i]{
    display:none !important;
  }
}

/* =========================
   EDIT LINK — В САМОМ КОНЦЕ СТАТЬИ
   ========================= */

/* на всякий: если у тебя где-то было скрытие github ссылок — НЕ трогать edit link */
/*nav[aria-label="table of contents"] a[href*="github.com"]{ display:none !important; } */

/* сам блок редактирования (разные версии Nextra могут по-разному назвать классы) */
.nextra-edit-link,
a[href*="github.com"][href*="/blob/"],
a[href*="gitlab"][href*="/-/blob/"]{
  margin-top: 24px !important;
}

/* если Nextra рендерит edit-link в отдельном контейнере — сделаем “кнопкой” */
.nextra-edit-link a{
  display: inline-flex !important;
  align-items: center !important;
  gap: 8px !important;

  padding: 10px 14px !important;
  border-radius: 12px !important;

  background: rgba(255,255,255,.05) !important;
  border: 1px solid rgba(255,255,255,.08) !important;

  color: rgba(255,255,255,.75) !important;
  text-decoration: none !important;
}
.nextra-edit-link a:hover{
  color: rgba(255,255,255,.92) !important;
  background: rgba(255,255,255,.08) !important;
}

.ft-editlink{
  display:inline-flex !important;
  align-items:center !important;
  padding:10px 14px !important;
  border-radius:12px !important;
  background: rgba(255,255,255,.05) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  color: rgba(255,255,255,.75) !important;
  text-decoration:none !important;
  margin-top: 26px !important;
}
.ft-editlink:hover{
  color: rgba(255,255,255,.92) !important;
  background: rgba(255,255,255,.08) !important;
}

/* =========================
   EDIT LINK — DEBUG SHOW ALL
   ========================= */

/* Показываем ВСЕ возможные варианты edit link */
a[href*="github.com"],
a[href*="gitlab.com"],
[class*="edit"],
[class*="Edit"],
[aria-label*="edit"],
[aria-label*="Edit"],
.nextra-edit-link,
.nextra-breadcrumb a:last-child,
footer a,
.prose > div:last-child a,
main > div:last-child a {
  display: inline-flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Стилизуем как кнопку */
a[href*="github.com/FunTimeMC/wiki/blob"],
a[href*="github.com"][href*="blob"] {
  display: inline-flex !important;
  align-items: center !important;
  gap: 8px !important;
  
  padding: 10px 14px !important;
  border-radius: 12px !important;
  margin-top: 32px !important;
  
  background: rgba(255,255,255,.05) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  color: rgba(255,255,255,.75) !important;
  text-decoration: none !important;
}

a[href*="github.com/FunTimeMC/wiki/blob"]:hover,
a[href*="github.com"][href*="blob"]:hover {
  color: rgba(255,255,255,.92) !important;
  background: rgba(255,255,255,.08) !important;
}

/* Если edit link обёрнут в div или span */
div[class*="edit"],
div[class*="Edit"],
span[class*="edit"],
span[class*="Edit"] {
  display: block !important;
  margin-top: 32px !important;
}
